<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Optimized Social Image</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; }
        canvas { border: 1px solid #ddd; margin: 10px 0; display: block; }
        .btn { background: #0066cc; color: white; padding: 12px 24px; border: none; border-radius: 4px; margin: 5px; cursor: pointer; }
        .btn:hover { background: #0052a3; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 4px; margin: 15px 0; }
        .output { background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 15px 0; word-break: break-all; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ Generate Optimized Social Image for WhatsApp</h1>
        
        <div class="info">
            <h3>ðŸŽ¯ Problem & Solution:</h3>
            <p><strong>Issue:</strong> Logo 1.3MB terlalu besar untuk WhatsApp preview</p>
            <p><strong>Solution:</strong> Generate optimized 1200x630 social image</p>
            <p><strong>Requirements:</strong> WhatsApp needs og:image untuk show preview</p>
        </div>

        <h3>Generated Social Image (1200x630):</h3>
        <canvas id="socialCanvas" width="1200" height="630"></canvas>
        
        <div>
            <button class="btn" onclick="generateOptimizedImage()">ðŸŽ¨ Generate Image</button>
            <button class="btn" onclick="downloadImage()">ðŸ“¥ Download PNG</button>
            <button class="btn" onclick="getDataURL()">ðŸ“‹ Get Data URL</button>
        </div>

        <div id="imageOutput" class="output" style="display: none;">
            <h4>ðŸ“‹ Data URL (for testing):</h4>
            <textarea id="dataUrlText" style="width: 100%; height: 100px; font-size: 10px;"></textarea>
            <p><strong>Instructions:</strong> Copy data URL and test with meta tag</p>
        </div>

        <div class="info">
            <h3>ðŸ“‹ Implementation Plan:</h3>
            <ol>
                <li>Generate optimized social image (lightweight)</li>
                <li>Save as /assets/social-preview-1200x630.png</li>
                <li>Update meta tags to use new image</li>
                <li>Test with cache buster URL</li>
            </ol>
        </div>
    </div>

    <script>
        function generateOptimizedImage() {
            const canvas = document.getElementById('socialCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, 1200, 630);
            
            // Gradient background
            const gradient = ctx.createLinearGradient(0, 0, 1200, 630);
            gradient.addColorStop(0, '#0f172a');
            gradient.addColorStop(1, '#1e293b');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 1200, 630);
            
            // Blue accent line
            ctx.fillStyle = '#0066cc';
            ctx.fillRect(0, 0, 12, 630);
            
            // Large title
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 80px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Lokstra Framework', 600, 180);
            
            // Subtitle
            ctx.fillStyle = '#38bdf8';
            ctx.font = '50px Arial, sans-serif';
            ctx.fillText('Go Backend Framework', 600, 260);
            
            // Tagline
            ctx.fillStyle = '#94a3b8';
            ctx.font = '36px Arial, sans-serif';
            ctx.fillText('Simple. Scalable. Structured.', 600, 320);
            
            // Features row
            ctx.fillStyle = '#ffffff';
            ctx.font = '28px Arial, sans-serif';
            ctx.textAlign = 'left';
            
            const features = ['ðŸš€ High Performance', 'ðŸª¶ Lightweight', 'ðŸ”§ Plugin System', 'ðŸŽ¯ Production Ready'];
            const startX = 150;
            const spacing = 270;
            
            features.forEach((feature, index) => {
                ctx.fillText(feature, startX + (index * spacing), 420);
            });
            
            // URL
            ctx.fillStyle = '#38bdf8';
            ctx.font = 'bold 40px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('lokstra.dev', 600, 550);
            
            // Small golang logo substitute (text)
            ctx.fillStyle = '#00add8';
            ctx.font = 'bold 24px Arial, sans-serif';
            ctx.fillText('Go', 1050, 580);
            
            console.log('âœ… Optimized social image generated!');
        }

        function downloadImage() {
            const canvas = document.getElementById('socialCanvas');
            const link = document.createElement('a');
            link.download = 'lokstra-social-preview-1200x630.png';
            link.href = canvas.toDataURL('image/png', 0.8); // 0.8 quality for smaller file
            link.click();
            console.log('ðŸ“¥ Optimized image downloaded!');
        }

        function getDataURL() {
            const canvas = document.getElementById('socialCanvas');
            const dataURL = canvas.toDataURL('image/png', 0.7); // Lower quality for smaller size
            
            document.getElementById('dataUrlText').value = dataURL;
            document.getElementById('imageOutput').style.display = 'block';
            
            console.log('ðŸ“‹ Data URL generated - size:', Math.round(dataURL.length / 1024), 'KB');
        }

        // Auto-generate on page load
        window.addEventListener('load', () => {
            generateOptimizedImage();
        });
    </script>
</body>
</html>
